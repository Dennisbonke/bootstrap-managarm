packages:
  - name: dolphin
    architecture: '@OPTION:arch@'
    metadata:
      summary: Plasma filemanager focusing on usability
      description: This package provides the KDE File Manager.
      spdx: 'GPL-2.0-only'
      website: 'https://apps.kde.org/dolphin/'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['kde-apps']
    source:
      subdir: 'ports'
      git: 'https://github.com/KDE/dolphin.git'
      tag: 'v24.01.95' # Yes this is 6.0rc2
      version: '6.0rc2'
    tools_required:
      - system-gcc
      - host-cmake
      - host-qt6
      - host-ecm
      - host-kconfig
      - host-kcmutils
      - host-pkg-config
    pkgs_required:
      - mlibc
      - qtbase6
      - kbookmarks
      - kcmutils
      - kcodecs
      - kcompletion
      - kconfig
      - kconfigwidgets
      - kcoreaddons
      - kcrash
      - kdbusaddons
      - ki18n
      - kiconthemes
      - kio
      # - kio-extras
      - kitemviews
      - kjobwidgets
      - knewstuff
      - knotifications
      - kparts
      - kservice
      - ktextwidgets
      - kwidgetsaddons
      - kwindowsystem
      - kxmlgui
      - solid
      - phonon
    configure:
      - args:
        - 'cmake'
        - '-GNinja'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DECM_DIR=@BUILD_ROOT@/tools/host-ecm'
        - '-DCMAKE_BUILD_TYPE=Debug'
        ### from ecm.class
        - '-DQT_MAJOR_VERSION=6'
        - '-DBUILD_TESTING=OFF'
        - '-DBUILD_QCH=FALSE'
        - '-DKDE_INSTALL_USE_QT_SYS_PATHS=ON'
        - '-DKDE_INSTALL_QMLDIR=/usr/lib/qt6/qml'
        - '-DKDE_INSTALL_PLUGINDIR=/usr/lib/qt6/plugins'
        - '-DKDE_INSTALL_QTPLUGINDIR=/usr/lib/qt6/plugins'
        ### end ecm.class
        - '-DKF6_HOST_TOOLING=@BUILD_ROOT@/tools/host-kconfig/lib/x86_64-linux-gnu/cmake/;@BUILD_ROOT@/tools/host-kcmutils/lib/x86_64-linux-gnu/cmake/' #:@BUILD_ROOT@/tools/host-kcmutils/lib/x86_64-linux-gnu/cmake/'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['ninja']
      - args: ['ninja', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: kcalc
    architecture: '@OPTION:arch@'
    metadata:
      summary: KDE calculator
      description: This package provides a calculator offering everything a scientific calculator does, and more.
      spdx: 'GPL-2.0-only'
      website: 'https://apps.kde.org/kcalc/'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['kde-apps']
    source:
      subdir: 'ports'
      git: 'https://github.com/KDE/kcalc.git'
      tag: 'v24.01.95' # Yes this is 6.0rc2
      version: '6.0rc2'
    tools_required:
      - system-gcc
      - host-cmake
      - host-qt6
      - host-ecm
      - host-kconfig
      - host-pkg-config
    pkgs_required:
      - mlibc
      - qtbase6
      - qt5compat
      - gmp
      - mpfr
      - kconfig
      - kconfigwidgets
      - kcoreaddons
      - kcrash
      - kguiaddons
      - ki18n
      - knotifications
      - kwidgetsaddons
      - kxmlgui
    configure:
      - args:
        - 'cmake'
        - '-GNinja'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DECM_DIR=@BUILD_ROOT@/tools/host-ecm'
        - '-DCMAKE_BUILD_TYPE=Debug'
        ### from ecm.class
        - '-DQT_MAJOR_VERSION=6'
        - '-DBUILD_TESTING=OFF'
        - '-DBUILD_QCH=FALSE'
        - '-DKDE_INSTALL_USE_QT_SYS_PATHS=ON'
        - '-DKDE_INSTALL_QMLDIR=/usr/lib/qt6/qml'
        - '-DKDE_INSTALL_PLUGINDIR=/usr/lib/qt6/plugins'
        - '-DKDE_INSTALL_QTPLUGINDIR=/usr/lib/qt6/plugins'
        ### end ecm.class
        - '-DKF6_HOST_TOOLING=@BUILD_ROOT@/tools/host-kconfig/lib/x86_64-linux-gnu/cmake/'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['ninja']
      - args: ['ninja', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: kio-extras
    architecture: '@OPTION:arch@'
    metadata:
      summary: KIO plugins present a filesystem-like view of arbitrary data
      description: This package provides the KIO plugins present a filesystem-like view of arbitrary data.
      spdx: 'GPL-2.0-only'
      website: 'https://invent.kde.org/network/kio-extras'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['kde-apps']
    source:
      subdir: 'ports'
      git: 'https://github.com/KDE/kio-extras.git'
      tag: 'v24.01.95' # Yes this is 6.0rc2
      version: '6.0rc2'
    tools_required:
      - system-gcc
      - host-cmake
      - host-qt6
      - host-ecm
      - host-kconfig
      - host-kcmutils
      - host-pkg-config
    pkgs_required:
      - mlibc
      - qcoro
      - qtbase6
      - qt5compat
      - qtsvg6
      - libkexiv2
      - karchive
      - kcmutils
      - kcodecs
      - kconfig
      - kconfigwidgets
      - kcoreaddons
      - kdbusaddons
      - kdnssd
      - kguiaddons
      - ki18n
      - kio
      - kparts
      - kservice
      - ktextwidgets
      - kxmlgui
      - solid
      - syntax-highlighting
      - phonon
      - libx11
      - libxcursor
    configure:
      - args:
        - 'cmake'
        - '-GNinja'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DECM_DIR=@BUILD_ROOT@/tools/host-ecm'
        - '-DCMAKE_BUILD_TYPE=Debug'
        ### from ecm.class
        - '-DQT_MAJOR_VERSION=6'
        - '-DBUILD_TESTING=OFF'
        - '-DBUILD_QCH=FALSE'
        - '-DKDE_INSTALL_USE_QT_SYS_PATHS=ON'
        - '-DKDE_INSTALL_QMLDIR=/usr/lib/qt6/qml'
        - '-DKDE_INSTALL_PLUGINDIR=/usr/lib/qt6/plugins'
        - '-DKDE_INSTALL_QTPLUGINDIR=/usr/lib/qt6/plugins'
        ### end ecm.class
        - '-DKF6_HOST_TOOLING=@BUILD_ROOT@/tools/host-kconfig/lib/x86_64-linux-gnu/cmake/;@BUILD_ROOT@/tools/host-kcmutils/lib/x86_64-linux-gnu/cmake/'
        - '-DBUILD_DOCS=OFF'
        - '-DBUILD_ACTIVITIES=OFF'
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['ninja']
      - args: ['ninja', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'

  - name: libkexiv2
    architecture: '@OPTION:arch@'
    metadata:
      summary: Wrapper around exiv2 library
      description: This package provides a wrapper around exiv2 library.
      spdx: 'GPL-2.0-or-later'
      website: 'https://apps.kde.org/'
      maintainer: "Dennis Bonke <dennis@managarm.org>"
      categories: ['kde-apps']
    source:
      subdir: 'ports'
      git: 'https://github.com/KDE/libkexiv2.git'
      tag: 'v24.01.95' # Yes this is 6.0rc2
      version: '6.0rc2'
    tools_required:
      - system-gcc
      - host-cmake
      - host-qt6
      - host-ecm
      - host-kconfig
      - host-kcmutils
      - host-pkg-config
    pkgs_required:
      - mlibc
      - qtbase6
      - exiv2
    configure:
      - args:
        - 'cmake'
        - '-GNinja'
        - '-DCMAKE_INSTALL_PREFIX=/usr'
        - '-DCMAKE_TOOLCHAIN_FILE=@SOURCE_ROOT@/scripts/CMakeToolchain-@OPTION:arch-triple@.txt'
        - '-DECM_DIR=@BUILD_ROOT@/tools/host-ecm'
        - '-DCMAKE_BUILD_TYPE=Debug'
        ### from ecm.class
        - '-DQT_MAJOR_VERSION=6'
        - '-DBUILD_TESTING=OFF'
        - '-DBUILD_QCH=FALSE'
        - '-DKDE_INSTALL_USE_QT_SYS_PATHS=ON'
        - '-DKDE_INSTALL_QMLDIR=/usr/lib/qt6/qml'
        - '-DKDE_INSTALL_PLUGINDIR=/usr/lib/qt6/plugins'
        - '-DKDE_INSTALL_QTPLUGINDIR=/usr/lib/qt6/plugins'
        ### end ecm.class
        - '@THIS_SOURCE_DIR@'
    build:
      - args: ['ninja']
      - args: ['ninja', 'install']
        environ:
          DESTDIR: '@THIS_COLLECT_DIR@'
